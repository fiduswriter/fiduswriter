{% extends "account/base.html" %}

{% load i18n %}
{% load compress %}
{% load account %}
{% load transpile %}

{% block head_title %}{% trans "Confirm E-mail Address" %}{% endblock %}
{% block extraheaders %}
<script type="text/javascript" src="{% static "js/confirm_account.mjs" %}" crossorigin="anonymous"></script>
<script type="text/javascript">
    'use strict';
    const testServer = "{{TEST_SERVER}}" === "True" ? true : false
    {% if confirmation %}
        const confirmationData = {
            confirmed: true,
            userName: "{{ confirmation.email_address.user }}",
            email: "{{ confirmation.email_address.email }}",
            submissionUrl: "{% url 'account_confirm_email' confirmation.key %}"
        }
    {% else %}
        const confirmationData = {
            confirmed: false,
            emailUrl: "{% url 'account_email' %}"
        }
    {% endif %}
    window.theAccountConfirmer = new ConfirmAccount(confirmationData, testServer)
    theAccountConfirmer.init()
</script>
{% endblock %}
